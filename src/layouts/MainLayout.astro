---
import Footer from "@components/Footer";
import Header from "@components/Header";

// import Header from
export interface Props {
	title?: string;
}

const { title } = Astro.props as Props;
---

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/x-icon" href="/favicon.ico" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
	</head>
	<body class="dark:bg-primary bg-soft-white dark:text-soft-white">
    <div class="min-h-screen grid grid-rows-[auto_1fr_auto] grid-cols-[100%]">
      <Header client:load/>
      <main class="flex-1">
        <slot />
      </main>
      <Footer/>
    </div>
  </body>
</html>

<script is:inline>
  const theme = (()=>{
    if(typeof window.localStorage !== 'undefined' && localStorage.getItem('theme')){
      return localStorage.getItem('theme')
    }
    if(window.matchMedia('(prefers-color-scheme: dark)').matches){
      return 'dark'
    }
    return 'light'
  })();

  if(theme === 'light'){
    document.documentElement.classList.remove('dark')
  }else{
    document.documentElement.classList.add('dark')
  }
  window.localStorage.setItem('theme', theme)
</script>

